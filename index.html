<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-firestore.js"></script>
</head>
<body>

    <h1>Wedding Of Jaenudin & Juleha</h1>
    <div id="timeCounter"></div>
    
    <h2>Foto Mempelai Laki-laki</h2>
    <img src="path/to/jaenudin.jpg" alt="Jaenudin" />

    <h2>Foto Mempelai Perempuan</h2>
    <img src="path/to/juleha.jpg" alt="Juleha" />

    <h2>Informasi Resepsi & Akad</h2>
    <p>Detail acara di sini...</p>

    <h2>Galeri Foto</h2>
    <div class="photo-gallery">
        <img src="path/to/photo1.jpg" alt="Foto 1" />
        <img src="path/to/photo2.jpg" alt="Foto 2" />
        <img src="path/to/photo3.jpg" alt="Foto 3" />
        <img src="path/to/photo4.jpg" alt="Foto 4" />
        <img src="path/to/photo5.jpg" alt="Foto 5" />
        <img src="path/to/photo6.jpg" alt="Foto 6" />
        <img src="path/to/photo7.jpg" alt="Foto 7" />
        <img src="path/to/photo8.jpg" alt="Foto 8" />
    </div>

    <h2>Komentar Tamu</h2>
    <form id="guestForm">
        <input type="text" id="name" placeholder="Nama" required />
        <select id="attendance" required>
            <option value="yes">Hadir</option>
            <option value="no">Tidak Hadir</option>
        </select>
        <textarea id="message" placeholder="Komentar" required></textarea>
        <button type="submit">Kirim Komentar</button>
    </form>

    <div id="guestComments"></div>

    <script>
        // Inisialisasi Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCChE8imiMTMdPDNA6sV9TNGzaCteGUFhU",
            authDomain: "dwiexp.firebaseapp.com",
            projectId: "dwiexp",
            storageBucket: "dwiexp.appspot.com",
            messagingSenderId: "126535178786",
            appId: "1:126535178786:web:2f740df40d96b819aec87b",
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Fungsi untuk menampilkan komentar dari Firestore
        function displayComments() {
            db.collection("comments").get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    addCommentToPage(data.name, data.attendance, data.message);
                });
            });
        }

        // Fungsi untuk menambahkan komentar ke halaman
        function addCommentToPage(name, attendance, message) {
            const guestComments = document.getElementById("guestComments");
            const commentDiv = document.createElement("div");
            commentDiv.classList.add("comment");

            commentDiv.innerHTML = `
                <strong>${name}</strong> (${attendance})<br>
                <p>${message}</p>
                <hr>
            `;

            guestComments.appendChild(commentDiv);
        }

        // Menangani submit form
        const guestForm = document.getElementById("guestForm");
        guestForm.addEventListener("submit", function(event) {
            event.preventDefault(); // Mencegah form submit secara default

            const name = document.getElementById("name").value;
            const attendance = document.getElementById("attendance").value === "yes" ? "Hadir" : "Tidak Hadir";
            const message = document.getElementById("message").value;

            // Simpan komentar ke Firestore
            db.collection("comments").add({
                name: name,
                attendance: attendance,
                message: message
            })
            .then(() => {
                addCommentToPage(name, attendance, message);
                guestForm.reset();
            })
            .catch((error) => {
                console.error("Error adding comment: ", error);
            });
        });

        // Tampilkan komentar saat halaman dimuat
        displayComments();
    </script>

</body>
</html>
